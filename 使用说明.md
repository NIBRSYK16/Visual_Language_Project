# 学术文献全景分析系统 - 使用说明

## 系统简介

学术文献全景分析系统是一个基于 React + D3.js + Three.js 的交互式数据可视化平台，采用深色主题设计，用于分析和展示学术文献的多维度信息，包括全球科研产出分布、关键词演化趋势、作者合作关系、会议趋势分析等。

## 技术栈

- **前端框架**: React 17.x + TypeScript 4.x
- **构建工具**: UmiJS 3.x
- **UI组件库**: Ant Design 5.x
- **数据可视化**: D3.js 7.x + d3-cloud
- **3D渲染**: Three.js
- **样式**: Less
- **数据格式**: JSON

## 功能模块

### 1. 全局年份筛选器

位于页面顶部 Header 区域，提供全局的年份范围筛选功能。

**功能特点**：

- 使用滑块（Slider）控制年份范围
- 实时显示当前筛选的年份范围
- 显示筛选后的论文数量
- 所有视图模块都会响应年份筛选的变化

**使用方法**：

- 拖动滑块左右两端的控制点调整年份范围
- 筛选后，所有可视化图表都会自动更新

### 2. 关键词筛选

在词云中点击关键词后，可以在Header区域看到选中的关键词标签。

**功能特点**：

- 支持多关键词组合筛选
- 在Header显示当前选中的关键词标签
- 可以点击标签的关闭按钮移除单个关键词
- 可以使用"清除"按钮清除所有关键词筛选

### 3. 全球科研产出地图（GeoMap）

使用世界地图展示不同国家的科研产出情况。

**功能特点**：

- 热力图显示：根据论文数量使用颜色深浅表示各国的科研产出
- 交互功能：
  - 鼠标悬停：显示国家名称、论文数量、ISO代码
  - 点击国家：筛选该国家的论文，地图会高亮显示选中的国家
- 图例：显示颜色与论文数量的对应关系（图例标题为白色，清晰可见）
- 响应筛选：自动响应年份筛选和关键词筛选

**数据来源**：

- 基于论文数据中的 `country` 字段进行国家统计
- 使用世界地图数据（world-atlas）进行地理可视化

### 4. 动态交互词云（WordCloud）

展示关键词的频率分布，词的大小反映出现频率。

**功能特点**：

- 可视化特点：
  - 词的大小根据出现频率动态调整
  - 使用多色系配色方案（蓝色、绿色、橙色、粉色、紫色、青色）
  - 选中的关键词使用蓝色高亮显示
- 交互功能：
  - 鼠标悬停：显示关键词、出现次数、相关论文数量
  - 点击关键词：触发筛选，影响其他视图模块
- 视图联动：
  - 点击关键词后，地图模块会更新，显示包含该关键词的论文在各国家的分布
  - 论文列表会筛选，只显示包含该关键词的论文
  - 作者合作网络、会议趋势、引用关系等模块也会相应更新
  - **注意**：关键词演化、国家演化、机构演化模块不受词云筛选影响，保持独立

### 5. 顶会趋势分析（ConferenceTrend）

展示不同会议在不同年份的论文数量趋势。

**功能特点**：

- 可视化形式：堆叠面积图 + 折线图
  - 面积图显示各会议论文数量的累积趋势
  - 折线图显示每个会议的边界线
- 多会议对比：同时展示多个会议的趋势，使用不同颜色区分
- 图例：右侧显示所有会议及其对应颜色
- 交互功能：
  - 鼠标悬停：显示会议名称和总论文数
  - 边界线高亮：悬停时相关折线加粗显示
- 响应筛选：自动响应年份筛选等条件

### 6. 会议占比分析（ConferencePieChart）

展示各会议论文占比情况。

**功能特点**：

- 可视化形式：饼图
- 显示各会议论文数量的占比关系
- 交互功能：鼠标悬停显示详细信息

### 7. 作者合作网络（3D）（CoAuthorNetwork3D）

使用Three.js实现3D力导向图展示作者之间的合作关系。

**功能特点**：

- 可视化特点：
  - 节点代表作者，节点大小反映作者的论文数量
  - 连线代表合作关系
  - 支持3D旋转、缩放、平移操作
  - 鼠标拖动控制旋转，滚轮控制缩放
- 搜索功能：
  - 顶部提供搜索框，支持按作者姓名或ID搜索
  - 匹配的作者节点会高亮显示（蓝色）
  - 与匹配节点相关的连接线也会高亮显示
  - 未匹配的节点和连线以半透明显示
- 交互功能：
  - 鼠标拖动：旋转3D视图（灵敏度已优化，操作流畅）
  - 滚轮缩放：缩放视图（灵敏度已优化）
  - 点击节点：显示作者详细信息卡片（论文列表、机构信息等）
  - 搜索后网络会保持静止，不再自动移动
- 性能优化：限制显示节点数量（最多80个），按论文数量排序显示最重要的作者

### 8. 关键词演化图谱（KeywordEvolution）

展示关键词在不同年份的排名和数量变化。

**功能特点**：

- 可视化形式：横向柱状图，显示每年Top 15的关键词
- 动态播放：
  - 支持自动播放功能，按时间顺序展示关键词变化
  - 播放/暂停按钮控制动画
  - 平滑的过渡动画效果
  - **播放范围**：按照用户选定的年份区间播放（如果用户选择了年份范围，只播放该范围内的年份）
- 时间控制：
  - 年份滑块：手动选择查看特定年份
  - 当前年份显示：实时显示当前查看的年份
- 交互功能：
  - 鼠标悬停：显示关键词和出现次数
  - 颜色一致性：每个关键词在所有年份保持相同的颜色
- **重要说明**：该模块独立于词云的关键词筛选，始终显示所有关键词的演化趋势

### 9. 国家论文发表数演化（CountryEvolution）

展示各国论文发表数随时间的变化。

**功能特点**：

- 可视化形式：横向柱状图，显示每年Top 15的国家
- 动态播放：
  - 支持自动播放功能
  - 播放/暂停按钮控制动画
  - **播放范围**：按照用户选定的年份区间播放
- 时间控制：
  - 年份滑块：手动选择查看特定年份
  - 当前年份显示：实时显示当前查看的年份
- 颜色一致性：每个国家在所有年份保持相同的颜色

### 10. 机构论文发表数演化（InstitutionEvolution）

展示各机构论文发表数随时间的变化。

**功能特点**：

- 可视化形式：横向柱状图，显示每年Top 15的机构
- 动态播放：
  - 支持自动播放功能
  - 播放/暂停按钮控制动画
  - **播放范围**：按照用户选定的年份区间播放
- 时间控制：
  - 年份滑块：手动选择查看特定年份
  - 当前年份显示：实时显示当前查看的年份
- 颜色一致性：每个机构在所有年份保持相同的颜色

### 11. 文献引用瀑布（CitationCascade）

展示文献之间的引用关系。

**功能特点**：

- 可视化形式：时间轴布局
  - 论文按年份在Y轴排列
  - 每个年份内的论文垂直分布
  - 使用曲线连接表示引用关系
- 交互功能：
  - 鼠标悬停：显示论文标题、年份、引用数、作者数
  - 节点标签：显示论文标题（过长自动截断）
- 统计信息：右侧显示总论文数、引用关系数、年份范围
- 布局特点：即使没有引用关系，也能看到所有论文的分布

### 12. 3D关键词球形（KeywordSphere3D）

使用Three.js实现3D球形展示关键词关系。

**功能特点**：

- 可视化形式：3D球形布局
  - 关键词分布在球面上
  - 支持3D旋转、缩放操作
- 交互功能：
  - 鼠标拖动：旋转3D视图
  - 滚轮缩放：缩放视图
  - 点击关键词：触发筛选

### 13. 论文列表（Paper List）

以侧边栏（Drawer）形式展示筛选后的论文详细信息。

**功能特点**：

- 显示形式：右侧滑出式抽屉面板
- 搜索功能：
  - 支持按论文标题搜索
  - 支持按作者名字搜索
  - 支持按机构名字搜索
  - 实时搜索，即时显示结果
- 排序功能：
  - 按时间排序（最新优先）
  - 按会议排序（会议名称升序）
- 论文卡片信息：
  - 标题（可悬停查看完整信息）
  - 年份
  - 会议/期刊
  - 引用数
  - 作者列表（显示前3个）
  - 关键词列表（显示前3个）
  - 悬停显示详细信息（包括摘要）
- 响应筛选：自动响应所有筛选条件（年份、国家、关键词等）
- 显示统计：显示当前显示的论文数量和总论文数量

### 14. 全局播放控制

三个演化图（关键词演化、国家演化、机构演化）支持统一播放控制。

**功能特点**：

- 位置：关键词演化图谱模块的右上角
- 功能：
  - "播放全部"按钮：同时播放三个演化模块
  - "暂停全部"按钮：同时暂停三个演化模块
  - 三个模块的年份同步，同时变化
- 播放范围：按照用户选定的年份区间播放

### 15. 鼠标特效（CursorEffect）

页面全局鼠标特效，提供流畅的交互体验。

**功能特点**：

- 自定义光标：白色发光圆点光标
- 轨迹效果：鼠标移动路径留下小白点，快速消失
- 点击效果：点击时产生波纹效果
- 智能隐藏：在输入框、按钮等交互元素上自动恢复默认光标

## 视图联动说明

### 全局联动

1. **年份筛选器联动**：

   - 调整年份范围后，所有视图模块都会更新
   - 地图、词云、作者网络、关键词演化、会议趋势、引用关系、论文列表都会响应年份变化
   - **演化图播放范围**：三个演化图（关键词、国家、机构）会按照选定的年份区间播放
2. **关键词筛选联动**（通过词云点击触发）：

   - **受影响模块**：
     - 全球科研产出地图：显示包含关键词的论文在各国家的分布热力图
     - 动态交互词云：选中的关键词高亮显示
     - 作者合作网络：只显示与相关论文相关的作者
     - 顶会趋势分析：只显示包含关键词的论文趋势
     - 会议占比分析：只显示包含关键词的论文占比
     - 文献引用瀑布：只显示包含关键词的论文引用关系
     - 3D关键词球形：只显示包含关键词的论文
     - 论文列表：只显示包含关键词的论文
   - **不受影响模块**：
     - 关键词演化图谱：保持独立，始终显示所有关键词的完整演化趋势
     - 国家论文发表数演化：保持独立，显示所有国家的演化趋势
     - 机构论文发表数演化：保持独立，显示所有机构的演化趋势
3. **国家筛选联动**（通过地图点击触发）：

   - 点击地图上的国家后，所有视图模块会筛选该国家的论文
   - 在Header显示选中的国家标签

### 局部联动

1. **作者搜索联动**（作者合作网络模块）：

   - 在作者合作网络的搜索框中输入作者名
   - 匹配的作者节点和相关连线会高亮显示
   - 不影响其他视图模块
2. **关键词筛选状态显示**：

   - 在页面顶部Header显示当前选中的关键词标签
   - 可以单独移除关键词或清除所有筛选
3. **演化图同步播放**：

   - 使用"播放全部"按钮，三个演化图会同步播放
   - 年份变化保持同步
   - 播放范围按照选定的年份区间

## 使用流程示例

### 示例1：查看特定年份区间的科研产出分布

1. 在顶部Header调整年份滑块，选择目标年份范围（如 2015-2020）
2. 观察地图模块，查看各国家的论文分布情况
3. 查看词云，了解该年份区间的热门关键词
4. 查看会议趋势，了解各会议在该年份区间的表现
5. 点击"播放全部"按钮，查看三个演化图在该年份区间的演化趋势

### 示例2：分析特定关键词的全球分布

1. 在词云中点击感兴趣的关键词
2. 观察地图更新，查看包含该关键词的论文在各国家的分布
3. 查看论文列表（点击Header的"论文列表"按钮），查看所有相关论文的详细信息
4. 查看作者合作网络，了解研究该关键词的主要作者
5. 如需添加更多关键词，继续点击词云中的其他关键词
6. 如需清除筛选，点击Header中的"清除"按钮

### 示例3：研究作者合作网络

1. 在作者合作网络模块的搜索框输入作者名
2. 观察高亮的作者节点和连线
3. 拖动视图旋转，更好地查看网络结构
4. 使用鼠标滚轮缩放，查看局部细节
5. 点击节点，查看作者的详细信息（论文列表、机构信息等）

### 示例4：分析演化趋势

1. 在顶部Header选择年份区间（如 2015-2020）
2. 在关键词演化模块，点击"播放全部"按钮（或单个模块的播放按钮）
3. 观察关键词、国家、机构三个维度的演化趋势同步播放
4. 或使用年份滑块，手动选择特定年份查看
5. 注意：演化图按照选定的年份区间播放，不是所有年份

### 示例5：查看论文详细信息

1. 点击Header的"论文列表"按钮，打开论文列表侧边栏
2. 使用搜索框输入关键词，搜索论文标题、作者或机构
3. 选择排序方式（按时间或按会议）
4. 鼠标悬停在论文标题上，查看完整信息（包括摘要）
5. 查看筛选后的论文数量和详细信息

## 数据格式说明

系统使用的论文数据格式（`public/data/papers.json`）应包含以下字段：

```typescript
interface Paper {
  id: string;                    // 论文唯一标识
  title: string;                 // 论文标题
  authors: Author[];             // 作者列表
  venue: Venue;                  // 会议/期刊信息
  year: number;                  // 发表年份
  keywords: string[];            // 关键词列表
  abstract?: string;             // 摘要（可选）
  references?: string[];         // 引用ID列表（可选）
  citations?: number;            // 被引用次数（可选）
  country?: string;              // 国家（从机构推导，可选）
  doi?: string;                  // DOI标识（可选）
  url?: string;                  // 论文链接（可选）
}

interface Author {
  id: string;                    // 作者ID
  name: string;                  // 作者姓名
  affiliations?: string[];       // 所属机构（可选，数组）
  country?: string;              // 国家（可选）
}

interface Venue {
  name: string;                  // 会议/期刊名称
  type: 'conference' | 'journal'; // 类型
  tier?: string;                 // 等级（如：顶会/A类，可选）
}
```

**注意事项**：

- `affiliations` 字段应为字符串数组，如果为 `null` 或非数组类型，系统会自动处理
- `keywords` 字段应为字符串数组
- `year` 字段为必需字段
- 国家字段应使用标准国家名称

## 界面设计

### 深色主题

- 背景色：深黑色（#0a0a0a）
- 卡片背景：深蓝色（#1a1a2e）
- 文字颜色：浅蓝白色（#e8f4f8）
- 边框颜色：蓝色半透明（rgba(77, 171, 247, 0.3)）
- 所有模块外框采用深色边框设计
- 图例和标签文字使用白色，确保清晰可见

### 鼠标特效

- 自定义白色发光光标
- 移动轨迹留下小白点
- 点击产生波纹效果

## 注意事项

1. **性能优化**：

   - 作者合作网络限制最多显示80个节点
   - 词云限制显示高频关键词
   - 演化图显示Top 15的项
   - 3D渲染使用Three.js优化性能
2. **数据要求**：

   - 确保论文数据包含必要的字段（year, keywords, authors等）
   - 国家字段应使用标准国家名称或ISO代码
   - `affiliations` 字段如果为 `null`，系统会自动跳过
3. **浏览器兼容性**：

   - 推荐使用现代浏览器（Chrome、Firefox、Safari、Edge最新版本）
   - 需要支持ES6+、WebGL（用于3D渲染）和SVG渲染
4. **交互提示**：

   - 鼠标悬停在各个可视化元素上会显示详细信息
   - 词云、地图等支持点击交互
   - 3D视图支持拖动和缩放操作
   - 在输入框等交互元素上，鼠标光标会自动恢复默认样式

## 开发说明

### 启动项目

```bash
cd literature-analysis-platform
yarn install
yarn start
```

### 构建项目

```bash
yarn build
```

构建后的文件在 `dist` 目录

### 项目结构

```
literature-analysis-platform/
├── src/
│   ├── components/          # 可视化组件
│   │   ├── GeoMap/         # 全球科研产出地图
│   │   ├── WordCloud/      # 动态交互词云
│   │   ├── CoAuthorNetwork3D/ # 3D作者合作网络
│   │   ├── KeywordEvolution/ # 关键词演化图谱
│   │   ├── CountryEvolution/ # 国家论文发表数演化
│   │   ├── InstitutionEvolution/ # 机构论文发表数演化
│   │   ├── ConferenceTrend/ # 顶会趋势分析
│   │   ├── ConferencePieChart/ # 会议占比分析
│   │   ├── CitationCascade/ # 文献引用瀑布
│   │   ├── KeywordSphere3D/ # 3D关键词球形
│   │   └── CursorEffect/   # 鼠标特效
│   ├── pages/              # 页面组件
│   │   └── index.tsx       # 主页面
│   ├── services/           # 服务层
│   │   ├── api.ts          # API接口
│   │   └── dataProcessor.ts # 数据处理
│   ├── types/              # TypeScript类型定义
│   ├── utils/              # 工具函数
│   ├── global.less         # 全局样式
│   └── pages/index.less    # 页面样式
├── public/
│   └── data/
│       └── papers.json     # 论文数据
├── crawler/                # 爬虫脚本（可选）
│   ├── main.py            # 主爬虫脚本
│   ├── config.py          # 配置文件
│   └── dblp_crawler.py    # DBLP爬虫
└── package.json
```

## 更新日志

### 主要功能

-  深色主题设计
- 3D作者合作网络（使用Three.js）
- 3D关键词球形
- 国家论文发表数演化
- 机构论文发表数演化
- 会议占比分析
- 全局播放控制（三个演化图同步播放）
- 论文列表搜索和排序功能
- 鼠标特效
- 演化图按选定年份区间播放
- 优化的交互体验（3D视图灵敏度、搜索后网络静止等）
