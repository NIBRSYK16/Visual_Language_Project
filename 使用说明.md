# 学术文献全景分析系统 - 使用说明

## 系统简介

学术文献全景分析系统是一个基于 React + D3.js 的交互式数据可视化平台，用于分析和展示学术文献的多维度信息，包括全球科研产出分布、关键词演化趋势、作者合作关系、会议趋势分析等。

## 技术栈

- **前端框架**: React 17.x + TypeScript 4.x
- **构建工具**: UmiJS 3.x
- **UI组件库**: Ant Design 5.x
- **数据可视化**: D3.js 7.x + d3-cloud
- **样式**: Less
- **数据格式**: JSON

## 功能模块

### 1. 全局年份筛选器

位于页面顶部 Header 区域，提供全局的年份范围筛选功能。

**功能特点**：

- 使用滑块（Slider）控制年份范围
- 实时显示当前筛选的年份范围
- 显示筛选后的论文数量
- 所有视图模块都会响应年份筛选的变化

**使用方法**：

- 拖动滑块左右两端的控制点调整年份范围
- 筛选后，所有可视化图表都会自动更新

### 2. 全球科研产出地图（GeoMap）

使用世界地图展示不同国家的科研产出情况。

**功能特点**：

- 热力图显示：根据论文数量使用颜色深浅表示各国的科研产出
- 交互功能：
  - 鼠标悬停：显示国家名称、论文数量、ISO代码
  - 点击国家：筛选该国家的论文，地图会高亮显示选中的国家
- 图例：显示颜色与论文数量的对应关系
- 响应筛选：自动响应年份筛选和关键词筛选

**数据来源**：

- 基于论文数据中的 `country` 字段进行国家统计
- 使用世界地图数据（world-atlas）进行地理可视化

### 3. 动态交互词云（WordCloud）

展示关键词的频率分布，词的大小反映出现频率。

**功能特点**：

- 可视化特点：
  - 词的大小根据出现频率动态调整
  - 使用多色系配色方案（蓝色、绿色、橙色、粉色、紫色、青色）
  - 选中的关键词使用蓝色高亮显示，并添加白色描边
  - 渐变背景，视觉效果更现代
- 交互功能：
  - 鼠标悬停：显示关键词、出现次数、相关论文数量
  - 点击关键词：触发筛选，影响其他视图模块
- 视图联动：
  - 点击关键词后，地图模块会更新，显示包含该关键词的论文在各国家的分布
  - 论文列表会筛选，只显示包含该关键词的论文
  - 作者合作网络、会议趋势、引用关系等模块也会相应更新
  - **注意**：关键词演化模块不受词云筛选影响，保持独立

**关键词筛选管理**：

- 可以点击多个关键词进行组合筛选
- 在页面顶部 Header 显示当前选中的关键词标签
- 可以点击标签的关闭按钮移除单个关键词
- 可以使用"清除"按钮清除所有关键词筛选

### 4. 作者合作网络（CoAuthorNetwork）

使用力导向图展示作者之间的合作关系。

**功能特点**：

- 可视化特点：
  - 节点代表作者，节点大小反映作者的论文数量
  - 连线代表合作关系，线条粗细反映合作强度
  - 支持拖拽节点调整布局
  - 支持鼠标滚轮缩放和平移视图
- 搜索功能：
  - 顶部提供搜索框，支持按作者姓名或ID搜索
  - 匹配的作者节点会高亮显示（蓝色，加粗边框）
  - 与匹配节点相关的连接线也会高亮显示
  - 未匹配的节点和连线以半透明显示
- 交互功能：
  - 鼠标悬停：显示作者姓名、论文数、合作数
  - 节点可拖拽：拖动节点调整网络布局
  - 缩放和平移：使用鼠标滚轮缩放，拖拽背景平移视图
- 性能优化：限制显示节点数量（最多100个），按论文数量排序显示最重要的作者

### 5. 关键词演化图谱（KeywordEvolution）

展示关键词在不同年份的排名和数量变化。

**功能特点**：

- 可视化形式：横向柱状图，显示每年Top 15的关键词
- 动态播放：
  - 支持自动播放功能，按时间顺序展示关键词变化
  - 播放/暂停按钮控制动画
  - 平滑的过渡动画效果
- 时间控制：
  - 年份滑块：手动选择查看特定年份
  - 当前年份显示：实时显示当前查看的年份
- 交互功能：
  - 鼠标悬停：显示关键词和出现次数
  - 颜色一致性：每个关键词在所有年份保持相同的颜色
- **重要说明**：该模块独立于词云的关键词筛选，始终显示所有关键词的演化趋势

### 6. 顶会趋势分析（ConferenceTrend）

展示不同会议在不同年份的论文数量趋势。

**功能特点**：

- 可视化形式：堆叠面积图 + 折线图
  - 面积图显示各会议论文数量的累积趋势
  - 折线图显示每个会议的边界线
- 多会议对比：同时展示多个会议的趋势，使用不同颜色区分
- 图例：右侧显示所有会议及其对应颜色
- 交互功能：
  - 鼠标悬停：显示会议名称和总论文数
  - 边界线高亮：悬停时相关折线加粗显示
- 响应筛选：自动响应年份筛选等条件

### 7. 文献引用瀑布（CitationCascade）

展示文献之间的引用关系。

**功能特点**：

- 可视化形式：时间轴布局
  - 论文按年份在Y轴排列
  - 每个年份内的论文垂直分布
  - 使用曲线连接表示引用关系
- 交互功能：
  - 鼠标悬停：显示论文标题、年份、引用数、作者数
  - 节点标签：显示论文标题（过长自动截断）
- 统计信息：右侧显示总论文数、引用关系数、年份范围
- 布局特点：即使没有引用关系，也能看到所有论文的分布

### 8. 论文列表（Paper List）

以表格形式展示筛选后的论文详细信息。

**功能特点**：

- 表格列：
  - 标题：论文标题（过长自动截断）
  - 年份：支持排序
  - 作者：显示前3个作者，更多作者以"+N"形式显示
  - 会议/期刊：论文发表的会议或期刊名称
  - 关键词：显示前3个关键词，更多关键词以"+N"形式显示
  - 引用数：支持排序
- 分页功能：
  - 默认每页显示10条
  - 支持修改每页显示数量
  - 显示总论文数
- 响应筛选：自动响应所有筛选条件（年份、国家、关键词等）

## 视图联动说明

### 全局联动

1. **年份筛选器联动**：

   - 调整年份范围后，所有视图模块都会更新
   - 地图、词云、作者网络、关键词演化、会议趋势、引用关系、论文列表都会响应年份变化
2. **关键词筛选联动**（通过词云点击触发）：

   - **受影响模块**：
     - 全球科研产出地图：显示包含关键词的论文在各国家的分布热力图
     - 动态交互词云：选中的关键词高亮显示
     - 作者合作网络：只显示与相关论文相关的作者
     - 顶会趋势分析：只显示包含关键词的论文趋势
     - 文献引用瀑布：只显示包含关键词的论文引用关系
     - 论文列表：只显示包含关键词的论文
   - **不受影响模块**：
     - 关键词演化图谱：保持独立，始终显示所有关键词的完整演化趋势
3. **国家筛选联动**（通过地图点击触发）：

   - 点击地图上的国家后，所有视图模块会筛选该国家的论文
   - 在Header显示选中的国家标签

### 局部联动

1. **作者搜索联动**（作者合作网络模块）：

   - 在作者合作网络的搜索框中输入作者名
   - 匹配的作者节点和相关连线会高亮显示
   - 不影响其他视图模块
2. **关键词筛选状态显示**：

   - 在页面顶部Header显示当前选中的关键词标签
   - 可以单独移除关键词或清除所有筛选

## 使用流程示例

### 示例1：查看特定年份的科研产出分布

1. 在顶部Header调整年份滑块，选择目标年份范围
2. 观察地图模块，查看各国家的论文分布情况
3. 查看词云，了解该年份的热门关键词
4. 查看会议趋势，了解各会议在该年份的表现

### 示例2：分析特定关键词的全球分布

1. 在词云中点击感兴趣的关键词
2. 观察地图更新，查看包含该关键词的论文在各国家的分布
3. 查看论文列表，查看所有相关论文的详细信息
4. 查看作者合作网络，了解研究该关键词的主要作者
5. 如需添加更多关键词，继续点击词云中的其他关键词
6. 如需清除筛选，点击Header中的"清除"按钮

### 示例3：研究作者合作网络

1. 在作者合作网络模块的搜索框输入作者名
2. 观察高亮的作者节点和连线
3. 拖拽节点调整布局，更好地查看网络结构
4. 使用鼠标滚轮缩放，查看局部细节
5. 鼠标悬停在节点上，查看作者的详细信息

### 示例4：分析关键词演化趋势

1. 在关键词演化模块，点击"播放"按钮
2. 观察关键词排名和数量的动态变化
3. 或使用年份滑块，手动选择特定年份查看
4. 注意：该模块独立于词云筛选，显示所有关键词的完整趋势

## 数据格式说明

系统使用的论文数据格式（`papers.json`）应包含以下字段：

```typescript
interface Paper {
  id: string;                    // 论文唯一标识
  title: string;                 // 论文标题
  authors: Author[];             // 作者列表
  venue: Venue;                  // 会议/期刊信息
  year: number;                  // 发表年份
  keywords: string[];            // 关键词列表
  abstract: string;              // 摘要
  references: string[];          // 引用ID列表
  citations: number;             // 被引用次数
  country?: string;              // 国家（从机构推导）
}

interface Author {
  id: string;                    // 作者ID
  name: string;                  // 作者姓名
  affiliations: string[];        // 所属机构
  country?: string;              // 国家
}

interface Venue {
  name: string;                  // 会议/期刊名称
  type: 'conference' | 'journal'; // 类型
  tier: string;                  // 等级（如：顶会/A类）
}
```

## 注意事项

1. **性能优化**：

   - 作者合作网络限制最多显示100个节点
   - 词云限制显示前50个高频关键词
   - 关键词演化显示Top 15的关键词
2. **数据要求**：

   - 确保论文数据包含必要的字段（year, keywords, authors, country等）
   - 国家字段应使用标准国家名称或ISO代码
   - 引用关系中的ID应能匹配到论文数据中的实际论文
3. **浏览器兼容性**：

   - 推荐使用现代浏览器（Chrome、Firefox、Safari、Edge最新版本）
   - 需要支持ES6+和SVG渲染
4. **交互提示**：

   - 鼠标悬停在各个可视化元素上会显示详细信息
   - 词云、地图等支持点击交互
   - 作者网络支持拖拽和缩放操作

## 开发说明

### 启动项目

```bash
cd literature-analysis-platform
yarn install
yarn start
```

### 构建项目

```bash
yarn build
```

### 项目结构

```
literature-analysis-platform/
├── src/
│   ├── components/          # 可视化组件
│   │   ├── GeoMap/         # 全球科研产出地图
│   │   ├── WordCloud/      # 动态交互词云
│   │   ├── CoAuthorNetwork/ # 作者合作网络
│   │   ├── KeywordEvolution/ # 关键词演化图谱
│   │   ├── ConferenceTrend/ # 顶会趋势分析
│   │   └── CitationCascade/ # 文献引用瀑布
│   ├── pages/              # 页面组件
│   │   └── index.tsx       # 主页面
│   ├── services/           # 服务层
│   │   ├── api.ts          # API接口
│   │   └── dataProcessor.ts # 数据处理
│   ├── types/              # TypeScript类型定义
│   └── utils/              # 工具函数
├── public/
│   └── data/
│       └── papers.json     # 论文数据
└── package.json
```
